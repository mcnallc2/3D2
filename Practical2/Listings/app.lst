


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             AsmTemplate, CODE, READONLY
    2 00000000                 IMPORT           main
    3 00000000         
    4 00000000         ; Practical 2 makes the 4 LEDs light up to represent a 3
                       2 bit number
    5 00000000         ; Group 24
    6 00000000         
    7 00000000                 EXPORT           start
    8 00000000         start
    9 00000000         
   10 00000000 E59F019C        LDR              R0, =INSTR
   11 00000004 E59F119C        LDR              R1, =LUT
   12 00000008 E3A02000        MOV              R2, #0
   13 0000000C E3A03000        MOV              R3, #0
   14 00000010 E3A04000        MOV              R4, #0
   15 00000014 E59FC190        LDR              R12, =0xA0000400
   16 00000018 E3A0B00A        MOV              R11, #10
   17 0000001C E3500000        CMP              R0, #0
   18 00000020 5A000001        BPL              pos
   19 00000024         
   20 00000024         ;negating the value of R1 and changing the sign
   21 00000024 E2600000        NEG              R0, R0
   22 00000028 E3A0B00B        MOV              R11, #11
   23 0000002C         
   24 0000002C E5912000 
                       pos     LDR              R2, [R1]
   25 00000030         
   26 00000030         while
   27 00000030 E0400002        SUB              R0, R0, R2
   28 00000034 4A000001        BMI              next_check
   29 00000038 E2844001        ADD              R4, #1
   30 0000003C EAFFFFFB        B                while
   31 00000040         
   32 00000040         next_check
   33 00000040 E0800002        ADD              R0, R0, R2
   34 00000044 E48C4004        STR              R4, [R12], #4
   35 00000048 E3520001        CMP              R2, #1
   36 0000004C 0A000001        BEQ              finish_check
   37 00000050 E5912004        LDR              R2, [R1, #4]
   38 00000054 EAFFFFF5        B                while
   39 00000058         
   40 00000058         finish_check
   41 00000058         
   42 00000058         
   43 00000058         ;LDR R12, =0xA0000400
   44 00000058         
   45 00000058         ;IO1DIR EQU 0xE0028018
   46 00000058         ;IO1SET EQU 0xE0028014
   47 00000058         ;IO1CLR EQU 0xE002801C
   48 00000058         
   49 00000058         ;ldr r1,=IO1DIR
   50 00000058         ;ldr r2,=0x000f0000 ;select P1.19--P1.16
   51 00000058         ;str r2,[r1]  ;make them outputs
   52 00000058         ;ldr r1,=IO1SET
   53 00000058         ;str r2,[r1]  ;set them to turn the LEDs off
   54 00000058         ;ldr r2,=IO1CLR
   55 00000058         
   56 00000058         ;; r1 points to the SET register
   57 00000058         ;; r2 points to the CLEAR register



ARM Macro Assembler    Page 2 


   58 00000058         
   59 00000058         ;ldr r3,=0x00010000 ; start with P1.16.
   60 00000058         ;mov r8,r3, lsl #1  ;r10 is for P1.17
   61 00000058         ;mov r9,r3, lsl #2  ;r10 is for P1.18
   62 00000058         ;mov r10,r3, lsl #3  ;r10 is for P1.19
   63 00000058         
   64 00000058         ;str r3,[r1]     ; clear the bit -> turn on the LED
   65 00000058         ;str r8,[r1]
   66 00000058         ;str r9,[r1]
   67 00000058         ;str r10,[r1]
   68 00000058         
   69 00000058         ;loop_
   70 00000058         
   71 00000058         ;;delay for about a second
   72 00000058         ;ldr r4,=2000000
   73 00000058         ;dloop subs r4,r4,#1
   74 00000058         ;bne dloop
   75 00000058         
   76 00000058         
   77 00000058         ;CMP r11, #10
   78 00000058         ;BNE nega
   79 00000058         
   80 00000058         ;str r3,[r2]     ;turn on P1.16 LED (+) 
   81 00000058         ;str r8,[r1]  ;turn off P1.17
   82 00000058         ;str r9,[r2]  ;turn on P1.18
   83 00000058         ;str r10,[r1] ;turn off P1.19
   84 00000058         
   85 00000058         ;nega
   86 00000058         ;str r3,[r2]     ;turn on P1.16 LED (+) 
   87 00000058         ;str r8,[r1]  ;turn off P1.17
   88 00000058         ;str r9,[r2]  ;turn on P1.18
   89 00000058         ;str r10,[r2] ;turn on P1.19
   90 00000058         
   91 00000058         ;ldr r4,=2000000 ;delay to show the sign
   92 00000058         ;sign_delay 
   93 00000058         ;subs r4,r4,#1
   94 00000058         ;bne sign_delay
   95 00000058         
   96 00000058         ;ldr r5, [r12], #4
   97 00000058         ;BL check_num
   98 00000058         
   99 00000058         ;ldr r4,=2000000 ;delay to show the sign
  100 00000058         ;num_delay 
  101 00000058         ;subs r4,r4,#1
  102 00000058         ;bne num_delay
  103 00000058         ;B loop_
  104 00000058         
  105 00000058 00000419 
                       INSTR   DCD              1049
  106 0000005C 3B9ACA00 
              05F5E100 
              00989680 
              000F4240 
              000186A0 
              00002710 
              000003E8 
              00000064 
              0000000A 
              00000001 LUT     DCD              1000000000, 100000000, 10000000



ARM Macro Assembler    Page 3 


, 1000000, 100000, 10000, 1000, 100, 10, 1
  107 00000084         
  108 00000084 EAFFFFFE 
                       stop    B                stop
  109 00000088         
  110 00000088         
  111 00000088         check_num
  112 00000088 E35B0009        CMP              r11, #9
  113 0000008C 0A000011        BEQ              nine
  114 00000090 E35B0009        CMP              r11, #9
  115 00000094 0A000014        BEQ              eight
  116 00000098 E35B0009        CMP              r11, #9
  117 0000009C 0A000017        BEQ              seven
  118 000000A0 E35B0009        CMP              r11, #9
  119 000000A4 0A00001A        BEQ              six
  120 000000A8 E35B0009        CMP              r11, #9
  121 000000AC 0A00001D        BEQ              five
  122 000000B0 E35B0009        CMP              r11, #9
  123 000000B4 0A000020        BEQ              four
  124 000000B8 E35B0009        CMP              r11, #9
  125 000000BC 0A000023        BEQ              three
  126 000000C0 E35B0009        CMP              r11, #9
  127 000000C4 0A000026        BEQ              two
  128 000000C8 E35B0009        CMP              r11, #9
  129 000000CC 0A000029        BEQ              one
  130 000000D0 E35B0009        CMP              r11, #9
  131 000000D4 0A00002C        BEQ              zero
  132 000000D8         
  133 000000D8         nine
  134 000000D8 E5823000        str              r3,[r2]     ;turn on P1.16 LED 
                                                            (+) 
  135 000000DC E5818000        str              r8,[r1]     ;turn off P1.17
  136 000000E0 E5819000        str              r9,[r1]     ;turn on P1.18
  137 000000E4 E582A000        str              r10,[r2]    ;turn on P1.19
  138 000000E8 EA00002C        B                end_sub_r
  139 000000EC         
  140 000000EC         eight
  141 000000EC E5823000        str              r3,[r2]     ;turn on P1.16 LED 
                                                            (+) 
  142 000000F0 E5818000        str              r8,[r1]     ;turn off P1.17
  143 000000F4 E5819000        str              r9,[r1]     ;turn on P1.18
  144 000000F8 E581A000        str              r10,[r1]    ;turn on P1.19
  145 000000FC EA000027        B                end_sub_r
  146 00000100         
  147 00000100         seven
  148 00000100 E5813000        str              r3,[r1]     ;turn on P1.16 LED 
                                                            (+) 
  149 00000104 E5828000        str              r8,[r2]     ;turn off P1.17
  150 00000108 E5829000        str              r9,[r2]     ;turn on P1.18
  151 0000010C E582A000        str              r10,[r2]    ;turn on P1.19
  152 00000110 EA000022        B                end_sub_r
  153 00000114         
  154 00000114         six
  155 00000114 E5813000        str              r3,[r1]     ;turn on P1.16 LED 
                                                            (+) 
  156 00000118 E5828000        str              r8,[r2]     ;turn off P1.17
  157 0000011C E5829000        str              r9,[r2]     ;turn on P1.18
  158 00000120 E581A000        str              r10,[r1]    ;turn on P1.19
  159 00000124 EA00001D        B                end_sub_r



ARM Macro Assembler    Page 4 


  160 00000128         
  161 00000128         five
  162 00000128 E5813000        str              r3,[r1]     ;turn on P1.16 LED 
                                                            (+) 
  163 0000012C E5828000        str              r8,[r2]     ;turn off P1.17
  164 00000130 E5819000        str              r9,[r1]     ;turn on P1.18
  165 00000134 E582A000        str              r10,[r2]    ;turn on P1.19
  166 00000138 EA000018        B                end_sub_r
  167 0000013C         
  168 0000013C         four
  169 0000013C E5813000        str              r3,[r1]     ;turn on P1.16 LED 
                                                            (+) 
  170 00000140 E5828000        str              r8,[r2]     ;turn off P1.17
  171 00000144 E5819000        str              r9,[r1]     ;turn on P1.18
  172 00000148 E581A000        str              r10,[r1]    ;turn on P1.19
  173 0000014C EA000013        B                end_sub_r
  174 00000150         
  175 00000150         three
  176 00000150 E5813000        str              r3,[r1]     ;turn on P1.16 LED 
                                                            (+) 
  177 00000154 E5818000        str              r8,[r1]     ;turn off P1.17
  178 00000158 E5829000        str              r9,[r2]     ;turn on P1.18
  179 0000015C E582A000        str              r10,[r2]    ;turn on P1.19
  180 00000160 EA00000E        B                end_sub_r
  181 00000164         
  182 00000164         two
  183 00000164 E5813000        str              r3,[r1]     ;turn on P1.16 LED 
                                                            (+) 
  184 00000168 E5818000        str              r8,[r1]     ;turn off P1.17
  185 0000016C E5829000        str              r9,[r2]     ;turn on P1.18
  186 00000170 E581A000        str              r10,[r1]    ;turn on P1.19
  187 00000174 EA000009        B                end_sub_r
  188 00000178         
  189 00000178         one
  190 00000178 E5813000        str              r3,[r1]     ;turn on P1.16 LED 
                                                            (+) 
  191 0000017C E5818000        str              r8,[r1]     ;turn off P1.17
  192 00000180 E5819000        str              r9,[r1]     ;turn on P1.18
  193 00000184 E582A000        str              r10,[r2]    ;turn on P1.19
  194 00000188 EA000004        B                end_sub_r
  195 0000018C         
  196 0000018C         zero
  197 0000018C E5823000        str              r3,[r2]     ;turn on P1.16 LED 
                                                            (+) 
  198 00000190 E5828000        str              r8,[r2]     ;turn off P1.17
  199 00000194 E5829000        str              r9,[r2]     ;turn on P1.18
  200 00000198 E582A000        str              r10,[r2]    ;turn on P1.19
  201 0000019C EAFFFFFF        B                end_sub_r
  202 000001A0         
  203 000001A0         
  204 000001A0         end_sub_r
  205 000001A0 E12FFF1E        BX               lr
  206 000001A4         
  207 000001A4                 END
              00000000 
              00000000 
              A0000400 
Command Line: --debug --xref --diag_suppress=9931 --apcs=interwork --depend=.\a
pp.d -o.\app.o -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Ke



ARM Macro Assembler    Page 5 


il_v5\ARM\Inc\Philips --predefine="__EVAL SETA 1" --predefine="__MICROLIB SETA 
1" --predefine="__UVISION_VERSION SETA 516" --list=.\listings\app.lst App.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

AsmTemplate 00000000

Symbol: AsmTemplate
   Definitions
      At line 1 in file App.s
   Uses
      None
Comment: AsmTemplate unused
INSTR 00000058

Symbol: INSTR
   Definitions
      At line 105 in file App.s
   Uses
      At line 10 in file App.s
Comment: INSTR used once
LUT 0000005C

Symbol: LUT
   Definitions
      At line 106 in file App.s
   Uses
      At line 11 in file App.s
Comment: LUT used once
check_num 00000088

Symbol: check_num
   Definitions
      At line 111 in file App.s
   Uses
      None
Comment: check_num unused
eight 000000EC

Symbol: eight
   Definitions
      At line 140 in file App.s
   Uses
      At line 115 in file App.s
Comment: eight used once
end_sub_r 000001A0

Symbol: end_sub_r
   Definitions
      At line 204 in file App.s
   Uses
      At line 138 in file App.s
      At line 145 in file App.s
      At line 152 in file App.s
      At line 159 in file App.s
      At line 166 in file App.s
      At line 173 in file App.s
      At line 180 in file App.s
      At line 187 in file App.s
      At line 194 in file App.s
      At line 201 in file App.s

finish_check 00000058




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: finish_check
   Definitions
      At line 40 in file App.s
   Uses
      At line 36 in file App.s
Comment: finish_check used once
five 00000128

Symbol: five
   Definitions
      At line 161 in file App.s
   Uses
      At line 121 in file App.s
Comment: five used once
four 0000013C

Symbol: four
   Definitions
      At line 168 in file App.s
   Uses
      At line 123 in file App.s
Comment: four used once
next_check 00000040

Symbol: next_check
   Definitions
      At line 32 in file App.s
   Uses
      At line 28 in file App.s
Comment: next_check used once
nine 000000D8

Symbol: nine
   Definitions
      At line 133 in file App.s
   Uses
      At line 113 in file App.s
Comment: nine used once
one 00000178

Symbol: one
   Definitions
      At line 189 in file App.s
   Uses
      At line 129 in file App.s
Comment: one used once
pos 0000002C

Symbol: pos
   Definitions
      At line 24 in file App.s
   Uses
      At line 18 in file App.s
Comment: pos used once
seven 00000100

Symbol: seven
   Definitions
      At line 147 in file App.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

   Uses
      At line 117 in file App.s
Comment: seven used once
six 00000114

Symbol: six
   Definitions
      At line 154 in file App.s
   Uses
      At line 119 in file App.s
Comment: six used once
start 00000000

Symbol: start
   Definitions
      At line 8 in file App.s
   Uses
      At line 7 in file App.s
Comment: start used once
stop 00000084

Symbol: stop
   Definitions
      At line 108 in file App.s
   Uses
      At line 108 in file App.s
Comment: stop used once
three 00000150

Symbol: three
   Definitions
      At line 175 in file App.s
   Uses
      At line 125 in file App.s
Comment: three used once
two 00000164

Symbol: two
   Definitions
      At line 182 in file App.s
   Uses
      At line 127 in file App.s
Comment: two used once
while 00000030

Symbol: while
   Definitions
      At line 26 in file App.s
   Uses
      At line 30 in file App.s
      At line 38 in file App.s

zero 0000018C

Symbol: zero
   Definitions
      At line 196 in file App.s
   Uses
      At line 131 in file App.s



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols

Comment: zero used once
21 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

main 00000000

Symbol: main
   Definitions
      At line 2 in file App.s
   Uses
      None
Comment: main unused
1 symbol
357 symbols in table
